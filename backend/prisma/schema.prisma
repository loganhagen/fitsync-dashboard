generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Connection {
  id                String             @id
  provider          ConnectionProvider
  providerAccountId String
  accessToken       String?
  refreshToken      String?
  expiresAt         DateTime?
  scope             String?
  createdAt         DateTime           @default(now())
  updatedAt         DateTime
  userId            String
  User              User               @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model User {
  id         String       @id
  email      String       @unique
  firstName  String
  lastName   String
  createdAt  DateTime     @default(now())
  updatedAt  DateTime
  Connection Connection[]
  SleepLog   SleepLog[]
}

model SleepLog {
  id                  String   @id
  fitbitLogId         BigInt
  userId              String
  dateOfSleep         String
  startTime           DateTime
  endTime             DateTime
  duration            Int
  efficiency          Int
  minutesToFallAsleep Int
  minutesAsleep       Int
  minutesAwake        Int
  timeInBed           Int
  isMainSleep         Boolean
  type                String
  infoCode            Int
  levels              Json?
  User                User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

enum ConnectionProvider {
  GOOGLE
  FITBIT
}
